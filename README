== nginx-rtmp-module ==

NGINX-based RTMP server

* Live streaming of video/audio

* Recording published streams in FLV file

* HTTP callbacks on publish/play/record

* Advanced buffering techniques
  to keep memory allocations at a minimum
  level for faster streaming and low
  memory footprint

* Works with Flash RTMP clients as well as
  ffmpeg/rtmpdump/flvstreamer etc
  (see examples in test/ subdir)


Build:

cd to NGINX source directory & run this:

./configure --add-module=<path-to-nginx-rtmp-module>
make
make install


RTMP URL format:

rtmp://rtmp.example.com/<app>[/<name>]

<app> -  should match one of application {}
         blocks in config
<name> - interpreted by each application
         can be empty


Example nginx.conf:

rtmp {

    server {

        listen 1935;

        chunk_size 128;

        max_buf 1000000;

        # TV mode: one publisher, many subscribers
        application mytv {

            # enable live streaming
            live on;

            # record flvs to this dir
            record /tmp/av;

            # max flv size
            record_size 3000000;

            # publish only from localhost
            allow publish 127.0.0.1;
            deny publish all;

            #allow play all;
        }

        # Many publishers, many subscribers
        # no checks, no recording
        application videochat {

            live on;

            # The following notifications receive all 
            # the session variables as well as 
            # particular call arguments in HTTP POST
            # request

            # Make HTTP request & use HTTP retcode
            # to decide whether to allow publishing
            # from this connection or not
            on_publish http://localhost:8080/publish;

            # Same with playing
            on_play http://localhost:8080/play;

            # Async notify about an flv recorded
            on_record_done http://localhost:8080/record_done;

        }

    }
}

